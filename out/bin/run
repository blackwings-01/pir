#!/bin/bash


if [[ $1 == "-"*  ]]; then
	OPT=$1
	FILE=$2
else
	FILE=$1
fi

if [[ $OPT == "-"*"t"*  ]]; then
	scp yaqiz@tucson.stanford.edu:~/pir/out/$FILE.dot $(dirname $FILE)
fi

if [[ $OPT == "-"*"c"*  ]]; then
	if [ "$(uname)" == "Darwin" ]; then
		# Do something under Mac OS X platform        
		dot -Kfdp -n -Tpdf -o $FILE.pdf $FILE.dot && open $FILE.pdf
		#dot -Kfdp -n -Tsvg -o $FILE.svg $FILE.dot && open -a "Safari" $FILE.svg
	elif [ "$(expr substr $(uname -s) 1 5)" == "Linux" ]; then
		# Do something under GNU/Linux platform
		dot -Kfdp -n -Tpdf -o $FILE.pdf $FILE.dot && gnome-open $FILE.pdf # not tested
		#dot -Kfdp -n -Tsvg -o $FILE.svg $FILE.dot && google-chrome $FILE.svg # not tested
	fi
else
	if [ "$(uname)" == "Darwin" ]; then
		# Do something under Mac OS X platform        
		#dot -Tpdf -o $FILE.pdf $FILE.dot && open $FILE.pdf
		dot -Tsvg -o $FILE.svg $FILE.dot && open -a "Safari" $FILE.svg
	elif [ "$(expr substr $(uname -s) 1 5)" == "Linux" ]; then
		# Do something under GNU/Linux platform
		#dot -Tpdf -o $FILE.pdf $FILE.dot && open $FILE.pdf
		dot -Tsvg -o $FILE.svg $FILE.dot && google-chrome $FILE.svg # not tested
	fi
fi
